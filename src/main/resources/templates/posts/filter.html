<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<form name="zipcode_form">
	<input type="submit" value="Set Filter" id="set_filter">
	<div>
		<label for="zip">Zipcode</label>
		<input type="number" id="zip" name="zip">
	</div>
	<div>
		<label for="range">Range <em>(miles)</em></label>
		<input type="number" id="range" name="range">
	</div>
</form>
<form name="filter_form" th:action="@{/posts/filter}" th:method="post" th:object="${post}">
	<input th:field="*{zipcode}" type="hidden" id="zipcode" value="00000">
	<input th:field="*{title}" type="hidden" id="title" value="title">
	<input th:field="*{body}" type="hidden" id="body">
	<div class="dropdown" style="margin: 20px" th:field="${type}">
		<button type="button"
				class="btn bg-dark text-center btn-outline-danger dropdown-toggle"
				data-toggle="dropdown">
			Type
		</button>
		<div class="dropdown-menu bg-dark" style="color: red; border: 2px solid red">
			<label for="type1" class="form-lable">Partners</label>
			<input class="dropdown-item" type="radio" name="type_id" value="1"
				   id="type1">
			<label for="type2" class="form-lable">Coaches</label>
			<input class="dropdown-item" type="radio" name="type_id" value="2"
				   id="type2">
			<label for="type3" class="form-lable">Clients</label>
			<input class="dropdown-item" type="radio" name="type_id" value="3"
				   id="type3">
		</div>
		<div>
			<input type="submit" value="submit">
		</div>
	</div>
</form>
<script src="../../keys.js"></script>
<script>
	function filterByZip() {

		let zipcode = document.forms.zipcode_form.zip.value;
		let range = document.forms.zipcode_form.range.value;

		function zipcodeFilter(zipcode) {

			let settings = {
				"url": "https://www.zipcodeapi.com/rest/" + zipKey + "/radius.csv/" + zipcode + "/" + range + "/miles?minimal",
				"method": "GET"
			}
			$.ajax(settings).done(function (response) {
				const params = document.getElementById("body");
				params.value = response;
			});
		}

		document.getElementById("set_filter").addEventListener("click", function (event) {
			event.preventDefault();
			zipcodeFilter(zipcode);
			alert("Filter set!")
		});
	}

</script>
</body>
</html>